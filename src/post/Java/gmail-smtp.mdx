---
title: "Gmail SMTP í™œìš©í•˜ì—¬ ë°œì‹ ì ì´ë©”ì¼ ì£¼ì†Œ ë³€ê²½í•˜ê¸°"
date: "2025-06-21"
---

## ï¹– ì´ê±¸ ìƒê°í•˜ê²Œ ëœ ì´ìœ 
- í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ ê°„ë‹¨í•˜ê²Œ **ê±°ë˜ëª…ì„¸ì„œë¥¼ ì´ë©”ì¼ ì „ì†¡í•˜ëŠ” ê¸°ëŠ¥**ì´ í•„ìš”í–ˆë‹¤.
- êµ¬í˜„ì€ ê°„ë‹¨í•˜ê²Œ í•  ìˆ˜ ìˆì—ˆìœ¼ë‚˜ íšŒì˜ ì¤‘ ë°œì‹ ì ì´ë©”ì¼ì„ ê¸°ë³¸ Gmailì´ ì•„ë‹Œ íšŒì‚¬ domain ì´ë©”ì¼ ì£¼ì†Œë¡œ ë³€ê²½í•˜ëŠ” ìˆ˜ìš”ê°€ ìƒê²¼ë‹¤
  - `hjoon19@gmail.com` -> `hjoon19@domain.com`
- ì‹¤ì œ êµ¬í˜„í•œ ê³¼ì •ì„ ì •ë¦¬í•´ë‘ê³  í—¤ë§¤ëŠ” ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì´ ë˜ê¸°ë¥¼ ë°”ë¼ëŠ” ë§ˆìŒìœ¼ë¡œ ì‘ì„±í•˜ê²Œ ë˜ì—ˆë‹¤.

## âœ… ì˜ˆì‹œ
- ë¨¼ì € Controller, Service ë‹¨ì˜ ê¸°ë³¸ ë¡œì§ì„ êµ¬ì„±í–ˆë‹¤.
- ë°›ëŠ” íŒŒë¼ë¯¸í„°ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ë¡œ ê°„ë‹¨í•˜ê²Œ êµ¬ì„±í–ˆë‹¤.
  - ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼ ì£¼ì†Œ
  - ê±°ë˜ì²˜ ì´ë¦„
  - ê±°ë˜ì²˜ ë‹´ë‹¹ì ì´ë¦„
  ì´í›„ì—ëŠ” ì²¨ë¶€íŒŒì¼ë„ í•¨ê»˜ ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•  ì˜ˆì •ì´ì§€ë§Œ, ì´ë²ˆ ê¸€ì—ì„œëŠ” ë°œì‹ ì ì´ë©”ì¼ ë³€ê²½ê¹Œì§€ì˜ ê³¼ì •ë§Œ ë‹¤ë£¬ë‹¤.
- `EmailController`
```java
@RestController
@RequiredArgsConstructor
@RequestMapping("/email")
public class EmailController {

  private final EmailService emailService;

  @PostMapping("/statement")
  public String sendEmailWithAttachment(@RequestParam String to, @RequestParam String custnm,
                                        @RequestParam String name) throws MessagingException {

   emailService.sendMessageWithAttachment(to, custnm, name);

   return "success";
  }
}
```
- `EmailService`
```java
@Service
@RequiredArgsConstructor
public class EmailService {

    private final JavaMailSender mailSender;
    private final SpringTemplateEngine templateEngine;

    public void sendMessageWithAttachment(String to, String custnm, String name) throws MessagingException {

        MimeMessage message = mailSender.createMimeMessage();
        MimeMessageHelper helper = new MimeMessageHelper(message, true, "utf-8");

        Context context = new Context();
        context.setVariable("custnm", custnm);
        context.setVariable("name", name);
        context.setVariable("to", to);

        String html = templateEngine.process("email/statement", context);
        helper.setTo(to);
        helper.setSubject("ê±°ë˜ëª…ì„¸ì„œ ì „ë‹¬ì˜ ê±´");
        helper.setText(html, true);

        mailSender.send(message);
    }
}
```
- íƒ€ì„ë¦¬í”„(Thymeleaf) í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ ê±°ë˜ì²˜ ì´ë¦„, ë‹´ë‹¹ì ì´ë¦„ ë“±ì„ ë©”ì¼ ë³¸ë¬¸ì— ë°˜ì˜í–ˆë‹¤.
- ì§€ê¸ˆì€ êµ¬ì¡° ì„¤ëª…ì´ ëª©ì ì´ë¯€ë¡œ, í…œí”Œë¦¿ ë‚´ìš© ìì²´ëŠ” ë„˜ì–´ê°€ì.

## ì•± ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
- ì•± ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
![spring-security-internal-flow](/posts/java/gmail-smtp/1.png)
- ì•± ì´ë¦„ ì„¤ì •
![spring-security-internal-flow](/posts/java/gmail-smtp/2.png)
- ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±
![spring-security-internal-flow](/posts/java/gmail-smtp/3.png)

## ì„¤ì •
- Gmailì— ë“¤ì–´ê°€ì„œ ì„¤ì • -> ëª¨ë“  ì„¤ì • ë³´ê¸° í´ë¦­
![spring-security-internal-flow](/posts/java/gmail-smtp/4.png)
- ê³„ì • ë° ê°€ì ¸ì˜¤ê¸° ì—ì„œ ë‹¤ë¥¸ ì´ë©”ì¼ ì£¼ì†Œ ì¶”ê°€ í´ë¦­
![spring-security-internal-flow](/posts/java/gmail-smtp/5.png)
- ì›í•˜ëŠ” ì´ë¦„ ë° ì´ë©”ì¼ ì£¼ì†Œ ì…ë ¥
![spring-security-internal-flow](/posts/java/gmail-smtp/6.png)
- ì¼ë°˜ Gmailì´ ì•„ë‹Œ, í•™êµ ë° ì§ì¥ ë‚´ ê²Œì •ì´ë¼ë©´ ì•„ë˜ì²˜ëŸ¼ ì´ëŸ° ì°½ì´ ëœ° ê²ƒì´ë‹¤.
![spring-security-internal-flow](/posts/java/gmail-smtp/7.png)
- SMTP ì„œë²„ëŠ” `smtp.gmail.com`ìœ¼ë¡œ ì§€ì •
- ì‚¬ìš©ì ì´ë¦„ì€ ì´ì „ì— ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§Œë“  gmail ê³„ì •ì˜ ì• ë¶€ë¶„ ì‘ì„±
  - e.g.)Test1@gmail.com -> Test1
- ë¹„ë°€ë²ˆí˜¸ëŠ” ì• ì „ì— ìƒì„±í•œ ì•± ë¹„ë°€ë²ˆí˜¸ë¥¼ ë„£ì–´ì¤€ë‹¤.
![spring-security-internal-flow](/posts/java/gmail-smtp/8.png)
- ì´ì œ ì „ì†¡ëœ ë©”ì¼ì„ í™•ì¸í•˜ì—¬ ì¸ì¦ì„ ì§„í–‰í•˜ë©´ ì™„ë£Œ
![spring-security-internal-flow](/posts/java/gmail-smtp/9.png)
- ì„¤ì • ì°½ì—ì„œ í™•ì¸í•´ë³´ë©´ ì˜ ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
![spring-security-internal-flow](/posts/java/gmail-smtp/10.png)

## ì½”ë“œ ì¶”ê°€
- ì´ì œ `service` ë‹¨ ì½”ë“œì—ì„œ `setFrom()`ì„ ì§€ì •í•´ì£¼ë©´ ì›í•˜ëŠ” ì´ë©”ì¼ ì£¼ì†Œë¡œ ë°œì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.
- `EmailService`
```java
@Service
@RequiredArgsConstructor
public class EmailService {

    private final JavaMailSender mailSender;
    private final SpringTemplateEngine templateEngine;

    public void sendMessageWithAttachment(String to, String custnm, String name) throws MessagingException {

        MimeMessage message = mailSender.createMimeMessage();
        MimeMessageHelper helper = new MimeMessageHelper(message, true, "utf-8");

        Context context = new Context();
        context.setVariable("custnm", custnm);
        context.setVariable("name", name);
        context.setVariable("to", to);

        String html = templateEngine.process("email/statement", context);
        helper.setFrom("hjoon19@haion.net");
        helper.setTo(to);
        helper.setSubject("ê±°ë˜ëª…ì„¸ì„œ ì „ë‹¬ì˜ ê±´");
        helper.setText(html, true);

        mailSender.send(message);
    }
}
```

## ğŸ™Œ í›„ê¸°
- ë¸”ë¡œê·¸ì™€ ë¬¸ì„œë¥¼ ì—¬ê¸°ì €ê¸° ì°¾ì•„ë³´ë©° ì‚½ì§ˆë„ ë§ì´ í–ˆì§€ë§Œ, ë‹¤ìŒì— ë˜ ë¹„ìŠ·í•œ ì‘ì—…ì„ í•  ë•Œ í° ë„ì›€ì´ ë  ê²ƒ ê°™ë‹¤.
- í˜¹ì‹œ ë‚˜ì²˜ëŸ¼ **íšŒì‚¬ ë„ë©”ì¸ ì´ë©”ì¼ì„ ë°œì‹ ìë¡œ ì§€ì •**í•˜ê³  ì‹¶ì€ ë¶„ì´ ìˆë‹¤ë©´, ì´ ê¸€ì´ ì¢‹ì€ ê°€ì´ë“œê°€ ë˜ì—ˆìœ¼ë©´ í•œë‹¤.